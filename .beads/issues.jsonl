{"id":"photosort-2j7","title":"HIGH: Fix private member access in photosort.py","description":"photosort.py:73 directly accesses self._photodb._output_dir which violates encapsulation.\n\nCurrent code:\n  media_file.move_to_directory_with_date(\n    self._photodb._output_dir,  # Accessing private member\n\nShould use:\n  media_file.move_to_directory_with_date(\n    self._config.output_dir(),  # Use public interface\n\nImpact: Violates encapsulation, makes refactoring harder\nEffort: 2 minutes","status":"closed","priority":1,"issue_type":"task","assignee":"@me","estimated_minutes":2,"created_at":"2026-01-08T13:24:59.166443+01:00","created_by":"ajo","updated_at":"2026-01-08T13:27:42.479543+01:00","closed_at":"2026-01-08T13:27:42.479543+01:00","close_reason":"Closed"}
{"id":"photosort-901","title":"HIGH: Add proper exit codes on error in main()","description":"photosort.py:158 catches exceptions but doesn't set exit code to 1. This means deployment scripts/cron jobs cannot detect failures.\n\nCurrent code:\n  except Exception:\n    logging.critical(...)\n    # Missing: sys.exit(1)\n\nShould add:\n  except Exception:\n    logging.critical(...)\n    sys.exit(1)\n\nImpact: Production reliability, failure detection\nEffort: 2 minutes","status":"closed","priority":1,"issue_type":"task","assignee":"@me","estimated_minutes":2,"created_at":"2026-01-08T13:24:59.461593+01:00","created_by":"ajo","updated_at":"2026-01-08T13:28:18.386081+01:00","closed_at":"2026-01-08T13:28:18.386081+01:00","close_reason":"Closed"}
{"id":"photosort-bh0","title":"LOW: Use os.path.relpath() in photodb.py","description":"photodb.py:96 does simple string slicing to make paths relative, which could fail with symlinks or if path doesn't start with output_dir.\n\nCurrent code:\n  file_dir = file_dir[len(self._output_dir) + 1:]\n\nShould use:\n  file_dir = os.path.relpath(file_dir, self._output_dir)\n\nImpact: Robustness with edge cases\nEffort: 5 minutes","status":"open","priority":3,"issue_type":"task","estimated_minutes":5,"created_at":"2026-01-08T13:25:01.492611+01:00","created_by":"ajo","updated_at":"2026-01-08T13:25:01.492611+01:00"}
{"id":"photosort-cdo","title":"MEDIUM: Add deprecation warnings for legacy config keys","description":"config.py:52-59 and :61-68 support legacy 'pattern' config key with awkward string comparison of exceptions.\n\nCurrent issues:\n- Comparing exception strings is brittle\n- No deprecation warning for users\n- Makes code harder to maintain\n\nRecommendation: Replace with clear dictionary checks and add logging.warning() for deprecated keys.\n\nImpact: Better UX, code maintainability\nEffort: 15 minutes","status":"open","priority":2,"issue_type":"task","estimated_minutes":15,"created_at":"2026-01-08T13:25:00.335803+01:00","created_by":"ajo","updated_at":"2026-01-08T13:25:00.335803+01:00"}
{"id":"photosort-cdu","title":"Improve test coverage and test quality","description":"Implement comprehensive test suite to increase coverage and ensure behavior testing (not external library testing). Target 85%+ line coverage on core modules.","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-08T12:35:08.383851+01:00","created_by":"ajo","updated_at":"2026-01-08T12:35:08.383851+01:00"}
{"id":"photosort-cdu.1","title":"Add Config module tests (test_004_config.py)","description":"Test YAML configuration parsing and all Config class methods. Test behavior: valid/invalid YAML, relative/absolute paths, octal chmod parsing, backward compatibility (pattern vs dir_pattern), optional field defaults.","status":"closed","priority":1,"issue_type":"task","estimated_minutes":90,"created_at":"2026-01-08T12:35:33.538273+01:00","created_by":"ajo","updated_at":"2026-01-08T12:44:43.790223+01:00","closed_at":"2026-01-08T12:44:43.790223+01:00","close_reason":"Closed","dependencies":[{"issue_id":"photosort-cdu.1","depends_on_id":"photosort-cdu","type":"parent-child","created_at":"2026-01-08T12:35:33.539446+01:00","created_by":"ajo"}]}
{"id":"photosort-cdu.10","title":"Document testing best practices and philosophy","description":"Update CLAUDE.md with testing philosophy: behavior testing vs implementation testing, mocking external dependencies, avoiding testing library internals. Document how to run coverage reports and interpret results.","status":"closed","priority":2,"issue_type":"task","estimated_minutes":30,"created_at":"2026-01-08T12:36:32.803464+01:00","created_by":"ajo","updated_at":"2026-01-08T13:08:22.843704+01:00","closed_at":"2026-01-08T13:08:22.843704+01:00","close_reason":"Closed","dependencies":[{"issue_id":"photosort-cdu.10","depends_on_id":"photosort-cdu","type":"parent-child","created_at":"2026-01-08T12:36:32.804774+01:00","created_by":"ajo"}]}
{"id":"photosort-cdu.2","title":"Add PhotoDB module tests (test_005_photodb.py)","description":"Test CSV-based database operations. Test behavior: create/load/write database, add entries, duplicate detection by hash, hash collision handling, backup file creation, merge mode, missing/corrupted DB handling, path prefix stripping.","status":"closed","priority":1,"issue_type":"task","estimated_minutes":120,"created_at":"2026-01-08T12:35:33.846652+01:00","created_by":"ajo","updated_at":"2026-01-08T12:46:28.850059+01:00","closed_at":"2026-01-08T12:46:28.850059+01:00","close_reason":"Closed","dependencies":[{"issue_id":"photosort-cdu.2","depends_on_id":"photosort-cdu","type":"parent-child","created_at":"2026-01-08T12:35:33.847761+01:00","created_by":"ajo"}]}
{"id":"photosort-cdu.3","title":"Add PhotoSort integration tests (test_006_photosort_integration.py)","description":"Test main orchestration workflow. Test behavior: sync() operation end-to-end, rebuilddb() operation, duplicate detection and movement, file permission setting, handling files without EXIF, multiple sources, database updates.","status":"closed","priority":1,"issue_type":"task","estimated_minutes":150,"created_at":"2026-01-08T12:35:34.14738+01:00","created_by":"ajo","updated_at":"2026-01-08T12:51:44.115965+01:00","closed_at":"2026-01-08T12:51:44.115965+01:00","close_reason":"Closed","dependencies":[{"issue_id":"photosort-cdu.3","depends_on_id":"photosort-cdu","type":"parent-child","created_at":"2026-01-08T12:35:34.148468+01:00","created_by":"ajo"}]}
{"id":"photosort-cdu.4","title":"Enhance WalkForMedia tests (expand test_001)","description":"Expand existing walk tests. Test behavior: ignore list functionality, hidden directory filtering, extension filtering, filesystem time skew, file readiness checks (empty/locked/recently modified), missing directories, AppleDouble file filtering.","status":"closed","priority":2,"issue_type":"task","estimated_minutes":90,"created_at":"2026-01-08T12:35:44.140287+01:00","created_by":"ajo","updated_at":"2026-01-08T13:02:10.305224+01:00","closed_at":"2026-01-08T13:02:10.305224+01:00","close_reason":"Closed","dependencies":[{"issue_id":"photosort-cdu.4","depends_on_id":"photosort-cdu","type":"parent-child","created_at":"2026-01-08T12:35:44.141532+01:00","created_by":"ajo"}]}
{"id":"photosort-cdu.5","title":"Add error handling tests (test_007_error_handling.py)","description":"Test robustness and error recovery. Test behavior: missing source/output directories, unwritable files/directories, file disappears during processing, concurrent access, invalid permissions in config, YAML parse errors.","status":"closed","priority":2,"issue_type":"task","estimated_minutes":90,"created_at":"2026-01-08T12:35:44.451489+01:00","created_by":"ajo","updated_at":"2026-01-08T13:12:11.023594+01:00","closed_at":"2026-01-08T13:12:11.023594+01:00","close_reason":"Closed","dependencies":[{"issue_id":"photosort-cdu.5","depends_on_id":"photosort-cdu","type":"parent-child","created_at":"2026-01-08T12:35:44.453022+01:00","created_by":"ajo"}]}
{"id":"photosort-cdu.6","title":"Enhance MediaFile edge case tests","description":"Add edge cases to existing test files. Test behavior: all supported file extensions, unknown file types, file comparison edge cases, makedirs_f with partial paths, rename_as failures, all EXIF tag fallbacks, malformed datetime, zero datetime handling.","status":"closed","priority":2,"issue_type":"task","estimated_minutes":75,"created_at":"2026-01-08T12:35:44.756351+01:00","created_by":"ajo","updated_at":"2026-01-08T13:14:19.366449+01:00","closed_at":"2026-01-08T13:14:19.366449+01:00","close_reason":"Closed","dependencies":[{"issue_id":"photosort-cdu.6","depends_on_id":"photosort-cdu","type":"parent-child","created_at":"2026-01-08T12:35:44.757664+01:00","created_by":"ajo"}]}
{"id":"photosort-cdu.7","title":"Add monitor mode tests (test_008_monitor.py)","description":"Test monitor loop behavior. Test behavior: monitor runs sync repeatedly (mock time.sleep), graceful exception handling during monitoring. Keep simple - verify loop behavior, not timing.","status":"closed","priority":3,"issue_type":"task","estimated_minutes":45,"created_at":"2026-01-08T12:35:53.683435+01:00","created_by":"ajo","updated_at":"2026-01-08T13:16:14.011596+01:00","closed_at":"2026-01-08T13:16:14.011596+01:00","close_reason":"Closed","dependencies":[{"issue_id":"photosort-cdu.7","depends_on_id":"photosort-cdu","type":"parent-child","created_at":"2026-01-08T12:35:53.684667+01:00","created_by":"ajo"}]}
{"id":"photosort-cdu.8","title":"Add pytest-cov and coverage reporting","description":"Add pytest-cov to dev dependencies. Configure coverage reporting in pyproject.toml. Set up coverage thresholds. Document how to run coverage reports in CLAUDE.md.","status":"closed","priority":2,"issue_type":"task","estimated_minutes":30,"created_at":"2026-01-08T12:35:53.986852+01:00","created_by":"ajo","updated_at":"2026-01-08T13:05:55.893757+01:00","closed_at":"2026-01-08T13:05:55.893757+01:00","close_reason":"Closed","dependencies":[{"issue_id":"photosort-cdu.8","depends_on_id":"photosort-cdu","type":"parent-child","created_at":"2026-01-08T12:35:53.988129+01:00","created_by":"ajo"}]}
{"id":"photosort-cdu.9","title":"Consider pytest-mock migration","description":"Evaluate replacing 'mock' library with pytest-mock for better pytest integration. Update existing tests if beneficial. Document decision.","status":"open","priority":3,"issue_type":"task","estimated_minutes":60,"created_at":"2026-01-08T12:35:54.294017+01:00","created_by":"ajo","updated_at":"2026-01-08T12:35:54.294017+01:00","dependencies":[{"issue_id":"photosort-cdu.9","depends_on_id":"photosort-cdu","type":"parent-child","created_at":"2026-01-08T12:35:54.295237+01:00","created_by":"ajo"}]}
{"id":"photosort-gnf","title":"MEDIUM: Handle missing exiftool gracefully","description":"photosort.py:135 has TODO comment about handling missing exiftool. Should provide clear error message when exiftool is not installed.\n\nRecommended implementation:\n  try:\n    exif.start()\n  except FileNotFoundError:\n    logging.critical('exiftool is not installed. Please install it:')\n    logging.critical('  Ubuntu/Debian: sudo apt-get install exiftool')\n    logging.critical('  macOS: brew install exiftool')\n    sys.exit(1)\n\nImpact: Better user experience, common pain point\nEffort: 10 minutes","status":"open","priority":2,"issue_type":"task","assignee":"@me","estimated_minutes":10,"created_at":"2026-01-08T13:24:59.751813+01:00","created_by":"ajo","updated_at":"2026-01-08T13:28:33.302429+01:00"}
{"id":"photosort-ik7","title":"LOW: Add type hints to public APIs","description":"The codebase has no type hints, making it harder to catch bugs at development time.\n\nRecommendation: Add type hints gradually, starting with public APIs in:\n- WalkForMedia.find_media() -\u003e Generator[Tuple[str, str], None, None]\n- MediaFile.hash() -\u003e str\n- MediaFile.datetime() -\u003e datetime.datetime\n- Config methods\n\nBenefits:\n- Catch bugs at development time (like _output_dir access issue)\n- Better IDE support\n- Improved documentation\n\nImpact: Developer experience\nEffort: Ongoing","status":"open","priority":3,"issue_type":"task","estimated_minutes":60,"created_at":"2026-01-08T13:25:00.619105+01:00","created_by":"ajo","updated_at":"2026-01-08T13:25:00.619105+01:00"}
{"id":"photosort-khl","title":"LOW: Make monitor sleep interval configurable","description":"photosort.py:113 hardcodes 10-second sleep interval in monitor mode.\n\nCurrent code:\n  time.sleep(10)  # Magic number\n\nRecommendation: Either make it a named constant or add to config:\n  output:\n    monitor_interval: 10  # seconds\n\nImpact: Flexibility for different use cases\nEffort: 10 minutes","status":"open","priority":3,"issue_type":"task","estimated_minutes":10,"created_at":"2026-01-08T13:25:00.907584+01:00","created_by":"ajo","updated_at":"2026-01-08T13:25:00.907584+01:00"}
{"id":"photosort-low","title":"MEDIUM: Simplify makedirs_f() implementation","description":"media.py:195-204 has custom makedirs_f() that reimplements os.makedirs(exist_ok=True).\n\nProblems:\n- Doesn't handle empty path components correctly\n- Race condition between isdir() check and mkdir() call\n- Python's os.makedirs() already does this better\n\nRecommendation: Replace with os.makedirs(path, mode=(mode | stat.S_IXUSR), exist_ok=True) or add comment explaining why custom implementation is needed.\n\nImpact: Code clarity, potential race conditions\nEffort: 5 minutes","status":"open","priority":2,"issue_type":"task","estimated_minutes":5,"created_at":"2026-01-08T13:25:00.045585+01:00","created_by":"ajo","updated_at":"2026-01-08T13:25:00.045585+01:00"}
{"id":"photosort-udn","title":"LOW: Document MD5 usage for duplicate detection","description":"media.py:61 uses MD5 for hashing. While acceptable for non-cryptographic duplicate detection, should add comment to prevent future security audit flags.\n\nRecommended comment:\n  # Using MD5 for performance - this is for duplicate detection only,\n  # not cryptographic security. Hash is combined with EXIF datetime.\n  hasher = hashlib.md5()\n\nImpact: Prevent confusion in security audits\nEffort: 2 minutes","status":"open","priority":3,"issue_type":"task","estimated_minutes":2,"created_at":"2026-01-08T13:25:01.195947+01:00","created_by":"ajo","updated_at":"2026-01-08T13:25:01.195947+01:00"}
{"id":"photosort-xmk","title":"CRITICAL: Remove unused exceptions.py file","description":"The exceptions.py file has 0% test coverage and is completely unused in the codebase. The DirError and Error classes defined in it are never imported or used anywhere.\n\nImpact: Technical debt, adds confusion\nEffort: 5 minutes\n\nAction: Delete src/photosort/exceptions.py","status":"closed","priority":0,"issue_type":"task","assignee":"@me","estimated_minutes":5,"created_at":"2026-01-08T13:24:58.860939+01:00","created_by":"ajo","updated_at":"2026-01-08T13:27:10.557254+01:00","closed_at":"2026-01-08T13:27:10.557254+01:00","close_reason":"Closed"}
